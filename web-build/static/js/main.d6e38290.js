(()=>{"use strict";var e={4858:(e,t,r)=>{var a=r(1734),n=(r(3819),r(2394)),s=r(6360),o=r(5317),i=r(3268),l=r(6909),c=r(7211);const d="https://sistema-nevin.replit.app";class u{static async login(e){try{const t=await c.default.post(`${d}/auth/login`,e);return!!t.data.token&&(await l.setItemAsync("token",t.data.token),await l.setItemAsync("user",JSON.stringify(t.data.user)),!0)}catch(t){throw console.error("Login error:",t),new Error("Error en inicio de sesi\xf3n")}}static async register(e){try{const t=await c.default.post(`${d}/auth/register`,e);return!!t.data.token&&(await l.setItemAsync("token",t.data.token),await l.setItemAsync("user",JSON.stringify(t.data.user)),!0)}catch(t){throw console.error("Register error:",t),new Error("Error en registro")}}static async logout(){await l.deleteItemAsync("token"),await l.deleteItemAsync("user")}static async getCurrentUser(){try{const e=await l.getItemAsync("user");return e?JSON.parse(e):null}catch{return null}}static async isAuthenticated(){return!!await l.getItemAsync("token")}}function f(){const[e,t]=(0,o.useState)(null),[r,a]=(0,o.useState)(!0),[n,s]=(0,o.useState)(null);(0,o.useEffect)((()=>{i()}),[]);const i=async()=>{try{const e=await u.getCurrentUser();t(e)}catch(e){console.error("Error checking auth status:",e)}finally{a(!1)}};return{user:e,isAuthenticated:!!e,loading:r,error:n,login:async e=>{try{s(null);const{user:r}=await u.login(e.email,e.password);t(r)}catch(r){throw s("Error al iniciar sesi\xf3n"),r}},register:async e=>{try{s(null);const{user:r}=await u.register(e);t(r)}catch(r){throw s("Error al registrar usuario"),r}},logout:async()=>{try{await u.logout(),t(null)}catch(e){throw console.error("Error logging out:",e),e}},forgotPassword:async e=>{try{s(null),await u.forgotPassword(e)}catch(t){throw s("Error al enviar el correo de recuperaci\xf3n"),t}},resetPassword:async(e,t)=>{try{s(null),await u.resetPassword(e,t)}catch(r){throw s("Error al restablecer la contrase\xf1a"),r}}}}var g=r(7201),h=r(3413),m=r(6099),y=r(1795),x=r(7060),p=r(9512),b=r(5525),j=r(3025);function v(){const[e,t]=(0,o.useState)(""),[r,a]=(0,o.useState)(""),[n,s]=(0,o.useState)(""),i=(0,b.useNavigation)();return(0,j.jsx)(h.default,{behavior:"height",style:C.container,children:(0,j.jsxs)(m.default,{style:C.surface,children:[(0,j.jsx)(y.default,{variant:"headlineMedium",style:C.title,children:"Iniciar Sesi\xf3n"}),(0,j.jsx)(x.default,{label:"Email",value:e,onChangeText:t,mode:"outlined",style:C.input,autoCapitalize:"none"}),(0,j.jsx)(x.default,{label:"Contrase\xf1a",value:r,onChangeText:a,mode:"outlined",style:C.input,secureTextEntry:!0}),n&&(0,j.jsx)(y.default,{style:C.errorText,children:n}),(0,j.jsx)(p.default,{mode:"contained",onPress:async()=>{try{await u.login({email:e,password:r})&&i.replace("Home")}catch(t){s("Error al iniciar sesi\xf3n")}},style:C.button,children:"Iniciar Sesi\xf3n"}),(0,j.jsx)(p.default,{mode:"text",onPress:()=>i.navigate("Register"),children:"\xbfNo tienes cuenta? Reg\xedstrate"})]})})}const C=g.default.create({container:{flex:1,backgroundColor:"#f5f5f5",justifyContent:"center",padding:16},surface:{padding:20,borderRadius:8,elevation:4},title:{textAlign:"center",marginBottom:24},input:{marginBottom:16,backgroundColor:"#fff"},button:{marginTop:8,marginBottom:16},errorText:{color:"red",textAlign:"center",marginBottom:16}});var w=r(6711),S=r(5790),k=r(935),E=r(3529);function A(){const[e,t]=o.useState({username:"",email:"",password:"",confirmPassword:"",terms:!1}),[r,a]=o.useState(!1),{register:n}=f(),s=(0,b.useNavigation)();return(0,j.jsx)(E.SafeAreaView,{style:T.container,children:(0,j.jsx)(S.default,{contentContainerStyle:T.scrollContent,children:(0,j.jsxs)(w.default,{style:T.content,children:[(0,j.jsx)(y.default,{variant:"headlineMedium",style:T.title,children:"Crear Cuenta"}),(0,j.jsx)(x.default,{label:"Nombre de usuario",value:e.username,onChangeText:e=>t((t=>Object.assign({},t,{username:e}))),mode:"outlined",style:T.input}),(0,j.jsx)(x.default,{label:"Email",value:e.email,onChangeText:e=>t((t=>Object.assign({},t,{email:e}))),mode:"outlined",keyboardType:"email-address",autoCapitalize:"none",style:T.input}),(0,j.jsx)(x.default,{label:"Contrase\xf1a",value:e.password,onChangeText:e=>t((t=>Object.assign({},t,{password:e}))),mode:"outlined",secureTextEntry:!0,style:T.input}),(0,j.jsx)(x.default,{label:"Confirmar Contrase\xf1a",value:e.confirmPassword,onChangeText:e=>t((t=>Object.assign({},t,{confirmPassword:e}))),mode:"outlined",secureTextEntry:!0,style:T.input}),(0,j.jsxs)(w.default,{style:T.checkboxContainer,children:[(0,j.jsx)(k.default.Android,{status:e.terms?"checked":"unchecked",onPress:()=>t((e=>Object.assign({},e,{terms:!e.terms})))}),(0,j.jsx)(y.default,{children:"Acepto los t\xe9rminos y condiciones"})]}),(0,j.jsx)(p.default,{mode:"contained",onPress:async()=>{try{a(!0),await n(e)}catch(t){console.error("Error registering:",t)}finally{a(!1)}},loading:r,style:T.button,disabled:!e.terms,children:"Registrarse"}),(0,j.jsx)(p.default,{mode:"text",onPress:()=>s.navigate("Login"),style:T.link,children:"\xbfYa tienes cuenta? Inicia sesi\xf3n"})]})})})}const T=g.default.create({container:{flex:1,backgroundColor:"#fff"},scrollContent:{flexGrow:1},content:{flex:1,padding:20,justifyContent:"center"},title:{textAlign:"center",marginBottom:30},input:{marginBottom:15},checkboxContainer:{flexDirection:"row",alignItems:"center",marginBottom:15},button:{marginTop:10,paddingVertical:8},link:{marginTop:15}});function _(){const[e,t]=o.useState(""),[r,a]=o.useState(!1),{forgotPassword:n}=f(),s=(0,b.useNavigation)();return(0,j.jsx)(E.SafeAreaView,{style:z.container,children:(0,j.jsxs)(w.default,{style:z.content,children:[(0,j.jsx)(y.default,{variant:"headlineMedium",style:z.title,children:"Recuperar Contrase\xf1a"}),(0,j.jsx)(y.default,{style:z.description,children:"Ingresa tu correo electr\xf3nico y te enviaremos instrucciones para recuperar tu contrase\xf1a."}),(0,j.jsx)(x.default,{label:"Email",value:e,onChangeText:t,mode:"outlined",keyboardType:"email-address",autoCapitalize:"none",style:z.input}),(0,j.jsx)(p.default,{mode:"contained",onPress:async()=>{try{a(!0),await n(e),s.navigate("Login")}catch(t){console.error("Error resetting password:",t)}finally{a(!1)}},loading:r,style:z.button,children:"Enviar Instrucciones"}),(0,j.jsx)(p.default,{mode:"text",onPress:()=>s.navigate("Login"),style:z.link,children:"Volver al inicio de sesi\xf3n"})]})})}const z=g.default.create({container:{flex:1,backgroundColor:"#fff"},content:{flex:1,padding:20,justifyContent:"center"},title:{textAlign:"center",marginBottom:20},description:{textAlign:"center",marginBottom:30,paddingHorizontal:20},input:{marginBottom:15},button:{marginTop:10,paddingVertical:8},link:{marginTop:15}});var B=r(7654),I=r(868),P=r(5747),O=r(181);r(5813),r(8944),r(3371);class R{db=null;static DB_NAME="bible.db";isInitialized=!1;constructor(){}static getInstance(){return R.instance||(R.instance=new R),R.instance}async initDatabase(){return!!this.isInitialized||this.initialize()}async initialize(){try{return console.log("SQLite not available on web, using API fallback"),!0}catch(e){return console.error("Error initializing database:",e),!1}}async copyDatabaseFromAssets(){}isReady(){return this.isInitialized&&null!==this.db}async getBooks(){try{if(!this.db)return console.log("Database not ready, returning empty array"),[];return await this.db.getAllAsync("SELECT id, name, book_number, testament, chapters_count as chapters FROM books ORDER BY book_number")}catch(e){return console.error("Error getting books:",e),[]}}async getChaptersCount(e){try{if(!this.db)return[];const t=await this.db.getFirstAsync("SELECT chapters_count FROM books WHERE name = ?",[e]);return t?Array.from({length:t.chapters_count},((e,t)=>t+1)):[]}catch(t){return console.error("Error getting chapters count:",t),[]}}async getVerses(e,t){try{if(!this.db)return[];return(await this.db.getAllAsync("SELECT v.id, v.book_id, v.chapter, v.verse, v.text_spanish as text, v.text_tzotzil, v.book_name\n         FROM verses v \n         WHERE v.book_name = ? AND v.chapter = ? \n         ORDER BY v.verse",[e,t])).map((e=>({id:e.id,book_id:e.book_id,chapter:e.chapter,verse:e.verse,text:e.text,text_tzotzil:e.text_tzotzil,book_name:e.book_name})))}catch(r){return console.error("Error getting verses:",r),[]}}async searchVerses(e){try{if(!this.db)return[];const t=`%${e}%`;return(await this.db.getAllAsync("SELECT v.id, v.book_id, v.chapter, v.verse, v.text_spanish as text, v.text_tzotzil, v.book_name\n         FROM verses v \n         WHERE v.text_spanish LIKE ? OR v.text_tzotzil LIKE ?\n         ORDER BY v.book_id, v.chapter, v.verse\n         LIMIT 100",[t,t])).map((e=>({id:e.id,book_id:e.book_id,chapter:e.chapter,verse:e.verse,text:e.text,text_tzotzil:e.text_tzotzil,book_name:e.book_name})))}catch(t){return console.error("Error searching verses:",t),[]}}async getRandomPromise(){try{if(!this.db)return null;return await this.db.getFirstAsync("SELECT id, text, image_url FROM promises ORDER BY RANDOM() LIMIT 1")}catch(e){return console.error("Error getting random promise:",e),null}}async getAllPromises(){try{if(!this.db)return[];return await this.db.getAllAsync("SELECT id, text, image_url FROM promises")}catch(e){return console.error("Error getting all promises:",e),[]}}async getVerse(e,t,r){try{if(!this.db)return null;const a=await this.db.getFirstAsync("SELECT v.id, v.book_id, v.chapter, v.verse, v.text_spanish as text, v.text_tzotzil, v.book_name\n         FROM verses v \n         WHERE v.book_name = ? AND v.chapter = ? AND v.verse = ?",[e,t,r]);return a?{id:a.id,book_id:a.book_id,chapter:a.chapter,verse:a.verse,text:a.text,text_tzotzil:a.text_tzotzil,book_name:a.book_name}:null}catch(a){return console.error("Error getting verse:",a),null}}async close(){try{this.db&&(await this.db.closeAsync(),this.db=null,this.isInitialized=!1)}catch(e){console.error("Error closing database:",e)}}}const M=R.getInstance(),N=["Juan 3:16 - Porque de tal manera am\xf3 Dios al mundo, que ha dado a su Hijo unig\xe9nito...","Salmos 23:1 - El Se\xf1or es mi pastor; nada me faltar\xe1...","Isa\xedas 41:10 - No temas, porque yo estoy contigo...","Filipenses 4:13 - Todo lo puedo en Cristo que me fortalece...","Jerem\xedas 29:11 - Porque yo s\xe9 los planes que tengo para vosotros...","Romanos 8:28 - Y sabemos que a los que aman a Dios, todas las cosas les ayudan a bien...","Mateo 11:28 - Venid a m\xed todos los que est\xe1is trabajados y cargados, y yo os har\xe9 descansar...","Josu\xe9 1:9 - Mira que te mando que te esfuerces y seas valiente..."];class V{static async getBooks(){try{0;const e=await O.default.getItem("bible_books");if(e)return JSON.parse(e);const t=await c.default.get(`${d}/api/bible/books`);return await O.default.setItem("bible_books",JSON.stringify(t.data)),t.data}catch(e){console.error("Error fetching books:",e);const t=await O.default.getItem("bible_books");return t?JSON.parse(t):[]}}static async getChapters(e){try{0;const t=`chapters_${e}`,r=await O.default.getItem(t);if(r)return JSON.parse(r);const a=await c.default.get(`${d}/api/bible/chapters/${encodeURIComponent(e)}`);return await O.default.setItem(t,JSON.stringify(a.data.chapters)),a.data.chapters}catch(t){console.error("Error fetching chapters:",t);const r=`chapters_${e}`,a=await O.default.getItem(r);return a?JSON.parse(a):[]}}static async getVerses(e,t){try{0;const r=`verses_${e}_${t}`,a=await O.default.getItem(r);if(a)return JSON.parse(a);const n=await c.default.get(`${d}/api/bible/verses/${encodeURIComponent(e)}/${t}`);return await O.default.setItem(r,JSON.stringify(n.data.verses)),n.data.verses}catch(r){console.error("Error fetching verses:",r);const a=`verses_${e}_${t}`,n=await O.default.getItem(a);return n?JSON.parse(n):[]}}static async getRandomPromise(){try{0;const e=await c.default.get(`${d}/random_promise`);return e.data&&e.data.text?e.data.text:N[Math.floor(Math.random()*N.length)]}catch(e){return console.error("Error fetching random promise:",e),N[Math.floor(Math.random()*N.length)]}}static async searchVerses(e){try{0;return(await c.default.get(`${d}/api/search?q=${encodeURIComponent(e)}`)).data.verses||[]}catch(t){return console.error("Error searching verses:",t),[]}}static async getVerse(e,t,r){try{0;return(await c.default.get(`${d}/api/verse/${encodeURIComponent(e)}/${t}/${r}`)).data}catch(a){return console.error("Error fetching verse:",a),null}}static async clearCache(){try{const e=(await O.default.getAllKeys()).filter((e=>e.startsWith("bible_")||e.startsWith("chapters_")||e.startsWith("verses_")));await O.default.multiRemove(e)}catch(e){console.error("Error clearing cache:",e)}}}function D(){const e=(0,b.useNavigation)(),t=(0,B.useTheme)(),[r,a]=(0,o.useState)("");(0,o.useEffect)((()=>{n()}),[]);const n=async()=>{try{const e=await V.getRandomPromise();a(e)}catch(e){console.error("Error loading daily promise:",e)}};return(0,j.jsx)(S.default,{style:L.container,children:(0,j.jsxs)(P.LinearGradient,{colors:[t.colors.primary,t.colors.surface],style:L.gradient,children:[(0,j.jsxs)(m.default,{style:L.promiseCard,children:[(0,j.jsx)(y.default,{style:L.promiseTitle,children:"Promesa del d\xeda"}),(0,j.jsx)(y.default,{style:L.promiseText,children:r}),(0,j.jsx)(p.default,{mode:"outlined",onPress:()=>{},style:L.shareButton,children:"Compartir"})]}),(0,j.jsxs)(w.default,{style:L.menuGrid,children:[(0,j.jsx)(I.default,{style:L.menuCard,onPress:()=>e.navigate("Bible"),children:(0,j.jsxs)(I.default.Content,{children:[(0,j.jsx)(y.default,{variant:"titleLarge",children:"Biblia"}),(0,j.jsx)(y.default,{variant:"bodyMedium",children:"Lee la Biblia en Tzotzil y Espa\xf1ol"})]})}),(0,j.jsx)(I.default,{style:L.menuCard,onPress:()=>e.navigate("Nevin"),children:(0,j.jsxs)(I.default.Content,{children:[(0,j.jsx)(y.default,{variant:"titleLarge",children:"Nevin AI"}),(0,j.jsx)(y.default,{variant:"bodyMedium",children:"Consulta con nuestro asistente b\xedblico"})]})}),(0,j.jsx)(I.default,{style:L.menuCard,onPress:()=>e.navigate("Search"),children:(0,j.jsxs)(I.default.Content,{children:[(0,j.jsx)(y.default,{variant:"titleLarge",children:"B\xfasqueda"}),(0,j.jsx)(y.default,{variant:"bodyMedium",children:"Busca vers\xedculos por palabra o referencia"})]})})]})]})})}const L=g.default.create({container:{flex:1},gradient:{padding:16,minHeight:"100%"},promiseCard:{padding:20,marginVertical:20,borderRadius:10,elevation:4},promiseTitle:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:16},promiseText:{fontSize:18,textAlign:"center",marginBottom:16},shareButton:{marginTop:8},menuGrid:{gap:16},menuCard:{marginBottom:16,elevation:4}});var $=r(3450),F=r(2188),J=r(2779);function W({navigation:e}){const[t,r]=(0,o.useState)([]),[a,n]=(0,o.useState)(""),[s,i]=(0,o.useState)(!0);(0,B.useTheme)();(0,o.useEffect)((()=>{l()}),[]);const l=async()=>{try{const e=(await V.getBooks()).map((e=>({id:e.id||e.book_number||0,name:e.name,chapters:e.chapters||e.chapters_count||0})));r(e)}catch(e){console.error("Error loading books:",e)}finally{i(!1)}},c=t.filter((e=>e.name.toLowerCase().includes(a.toLowerCase())));return s?(0,j.jsx)(w.default,{style:q.centered,children:(0,j.jsx)(F.default,{size:"large"})}):(0,j.jsxs)(E.SafeAreaView,{style:q.container,children:[(0,j.jsx)(J.default,{placeholder:"Buscar libro...",value:a,onChangeText:n,style:q.searchBar}),(0,j.jsx)($.default,{data:c,renderItem:({item:t})=>(0,j.jsx)(I.default,{style:q.bookCard,onPress:()=>e.navigate("Chapter",{book:t.name}),children:(0,j.jsxs)(I.default.Content,{children:[(0,j.jsx)(y.default,{variant:"titleMedium",style:q.bookName,children:t.name}),(0,j.jsxs)(y.default,{variant:"bodyMedium",children:[t.chapters," cap\xedtulos"]})]})}),keyExtractor:e=>String(e.id),contentContainerStyle:q.listContent})]})}const q=g.default.create({container:{flex:1,backgroundColor:"#fff"},centered:{flex:1,justifyContent:"center",alignItems:"center"},searchBar:{margin:16,elevation:4},listContent:{padding:16},bookCard:{marginBottom:12},bookName:{fontWeight:"bold"}});var H=r(3206);function U(){const e=(0,b.useRoute)(),t=(0,b.useNavigation)(),{book:r}=((0,B.useTheme)(),e.params),[a,n]=(0,o.useState)([]),[s,i]=(0,o.useState)(!0),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(null),f=async()=>{try{i(!0);const e=await V.getChapters(r);n(e),u(null)}catch(e){console.error("Error loading chapters:",e),u("Error cargando cap\xedtulos")}finally{i(!1)}};(0,o.useEffect)((()=>{f()}),[r]);return s&&!l?(0,j.jsx)(w.default,{style:G.centered,children:(0,j.jsx)(F.default,{size:"large"})}):d?(0,j.jsx)(w.default,{style:G.centered,children:(0,j.jsx)(y.default,{style:G.errorText,children:d})}):(0,j.jsxs)(S.default,{style:G.container,refreshControl:(0,j.jsx)(H.default,{refreshing:l,onRefresh:async()=>{c(!0),await f(),c(!1)}}),children:[(0,j.jsx)(y.default,{style:G.title,children:r}),(0,j.jsx)(w.default,{style:G.chaptersGrid,children:a.map((e=>(0,j.jsx)(I.default,{style:G.chapterCard,onPress:()=>{return a=e,void t.navigate("Verses",{book:r,chapter:a});var a},children:(0,j.jsx)(I.default.Content,{children:(0,j.jsx)(y.default,{style:G.chapterNumber,children:e})})},e)))})]})}const G=g.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},centered:{flex:1,justifyContent:"center",alignItems:"center"},title:{fontSize:24,fontWeight:"bold",textAlign:"center",marginVertical:16},chaptersGrid:{flexDirection:"row",flexWrap:"wrap",justifyContent:"center",padding:8},chapterCard:{width:80,height:80,margin:8,justifyContent:"center",alignItems:"center"},chapterNumber:{fontSize:20,textAlign:"center"},errorText:{color:"red",textAlign:"center"}});var Y=r(5609),K=r(8223);function Q(){const e=(0,b.useRoute)(),{book:t,chapter:r,initialVerse:a}=((0,B.useTheme)(),e.params),[n,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(!0),[c,d]=(0,o.useState)(!1),[u,f]=(0,o.useState)(null),[g,h]=(0,o.useState)(!0),[m,x]=(0,o.useState)(!0),p=async()=>{try{l(!0);const e=await V.getVerses(t,r);s(e),f(null)}catch(e){console.error("Error loading verses:",e),f("Error cargando vers\xedculos")}finally{l(!1)}};return(0,o.useEffect)((()=>{p()}),[t,r]),i&&!c?(0,j.jsx)(w.default,{style:Z.centered,children:(0,j.jsx)(F.default,{size:"large"})}):u?(0,j.jsx)(w.default,{style:Z.centered,children:(0,j.jsx)(y.default,{style:Z.errorText,children:u})}):(0,j.jsxs)(E.SafeAreaView,{style:Z.container,children:[(0,j.jsxs)(w.default,{style:Z.header,children:[(0,j.jsxs)(y.default,{style:Z.title,children:[t," ",r]}),(0,j.jsxs)(w.default,{style:Z.toggleContainer,children:[(0,j.jsxs)(w.default,{style:Z.toggleRow,children:[(0,j.jsx)(y.default,{children:"Tzotzil"}),(0,j.jsx)(Y.default,{value:g,onValueChange:h})]}),(0,j.jsxs)(w.default,{style:Z.toggleRow,children:[(0,j.jsx)(y.default,{children:"Espa\xf1ol"}),(0,j.jsx)(Y.default,{value:m,onValueChange:x})]})]})]}),(0,j.jsx)(S.default,{style:Z.scrollView,refreshControl:(0,j.jsx)(H.default,{refreshing:c,onRefresh:async()=>{d(!0),await p(),d(!1)}}),children:n.map((e=>(0,j.jsx)(I.default,{style:[Z.verseCard,a===e.verse&&Z.highlightedVerse],children:(0,j.jsxs)(I.default.Content,{children:[(0,j.jsx)(y.default,{style:Z.verseNumber,children:e.verse}),g&&e.text_tzotzil&&(0,j.jsxs)(w.default,{style:Z.textBlock,children:[(0,j.jsx)(y.default,{style:Z.languageLabel,children:"Tzotzil"}),(0,j.jsx)(y.default,{style:Z.verseText,children:e.text_tzotzil})]}),g&&m&&e.text_tzotzil&&e.text&&(0,j.jsx)(K.default,{style:Z.divider}),m&&e.text&&(0,j.jsxs)(w.default,{style:Z.textBlock,children:[(0,j.jsx)(y.default,{style:Z.languageLabel,children:"Espa\xf1ol"}),(0,j.jsx)(y.default,{style:Z.verseText,children:e.text})]})]})},e.id||`${e.chapter}-${e.verse}`)))})]})}const Z=g.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},centered:{flex:1,justifyContent:"center",alignItems:"center"},header:{padding:16,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#eee"},title:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:12},toggleContainer:{flexDirection:"row",justifyContent:"center",gap:24},toggleRow:{flexDirection:"row",alignItems:"center",gap:8},scrollView:{flex:1,padding:16},verseCard:{marginBottom:12},highlightedVerse:{borderWidth:2,borderColor:"#4caf50"},verseNumber:{fontSize:16,fontWeight:"bold",color:"#666",marginBottom:8},textBlock:{marginVertical:4},languageLabel:{fontSize:12,color:"#888",fontStyle:"italic",marginBottom:4},verseText:{fontSize:16,lineHeight:24},divider:{marginVertical:8},errorText:{color:"red",textAlign:"center"}});function X(){const e=(0,b.useNavigation)(),[t,r]=(0,o.useState)(""),[a,n]=(0,o.useState)([]),[s,i]=(0,o.useState)(!1),l=(0,B.useTheme)(),c=async()=>{if(t.trim()){i(!0);try{const e=await V.searchVerses(t);n(e)}catch(e){console.error("Error searching verses:",e)}finally{i(!1)}}};return(0,j.jsxs)(E.SafeAreaView,{style:ee.container,children:[(0,j.jsxs)(w.default,{style:ee.searchContainer,children:[(0,j.jsx)(x.default,{mode:"outlined",placeholder:"Buscar vers\xedculos...",value:t,onChangeText:r,style:ee.searchInput,returnKeyType:"search",onSubmitEditing:c}),(0,j.jsx)(p.default,{mode:"contained",onPress:c,style:ee.searchButton,disabled:s,children:"Buscar"})]}),s?(0,j.jsx)(w.default,{style:ee.loadingContainer,children:(0,j.jsx)(F.default,{size:"large",color:l.colors.primary})}):(0,j.jsxs)(S.default,{style:ee.resultsContainer,children:[a.map(((t,r)=>(0,j.jsx)(I.default,{style:ee.resultCard,onPress:()=>{return r=t.book,a=t.chapter,n=t.verse,void e.navigate("Verses",{book:r,chapter:a,initialVerse:n});var r,a,n},children:(0,j.jsxs)(I.default.Content,{children:[(0,j.jsxs)(y.default,{variant:"titleMedium",children:[t.book," ",t.chapter,":",t.verse]}),(0,j.jsx)(y.default,{variant:"bodyMedium",style:ee.verseText,children:t.text})]})},r))),0===a.length&&t&&!s&&(0,j.jsxs)(y.default,{style:ee.noResults,children:['No se encontraron resultados para "',t,'"']})]})]})}const ee=g.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},searchContainer:{padding:16,flexDirection:"row",alignItems:"center",gap:8},searchInput:{flex:1},searchButton:{minWidth:100},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},resultsContainer:{flex:1,padding:16},resultCard:{marginBottom:12,elevation:2},verseText:{marginTop:8},noResults:{textAlign:"center",marginTop:24,color:"#666"}}),te=c.default.create({baseURL:"http://localhost:5000",headers:{"Content-Type":"application/json"}});function re(){const[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)(""),[n,s]=(0,o.useState)(!1),i=(0,o.useRef)(null),[l,c]=(0,o.useState)(!1);return(0,j.jsx)(E.SafeAreaView,{style:ae.container,children:(0,j.jsxs)(h.default,{behavior:"height",style:ae.keyboardAvoid,children:[(0,j.jsx)(y.default,{variant:"headlineMedium",style:ae.title,children:"Nevin AI"}),(0,j.jsx)(S.default,{ref:i,style:ae.messagesContainer,contentContainerStyle:ae.messagesContent,children:e.map((e=>(0,j.jsx)(I.default,{style:[ae.messageCard,e.isUser?ae.userMessage:ae.nevinMessage],children:(0,j.jsx)(I.default.Content,{children:(0,j.jsx)(y.default,{children:e.content})})},e.id)))}),(0,j.jsxs)(w.default,{style:ae.inputContainer,children:[(0,j.jsx)(x.default,{value:r,onChangeText:a,placeholder:"Escribe tu mensaje...",mode:"outlined",multiline:!0,style:ae.input,disabled:n,right:(0,j.jsx)(x.default.Icon,{icon:"send",onPress:async()=>{if(!r.trim())return;const n={id:Date.now().toString(),content:r.trim(),isUser:!0,timestamp:new Date};t((e=>[...e,n])),a(""),s(!0);try{const r=await te.post("/nevin/chat",{message:n.content,conversation_history:e.map((e=>({role:e.isUser?"user":"assistant",content:e.content})))}),a={id:(Date.now()+1).toString(),content:r.data.response,isUser:!1,timestamp:new Date};t((e=>[...e,a])),setTimeout((()=>{i.current?.scrollToEnd({animated:!0})}),100)}catch(o){console.error("Error sending message:",o)}finally{s(!1)}},disabled:n||!r.trim()})}),(0,j.jsx)(p.default,{style:ae.donateButton,onPress:()=>c(!0),children:"Donate"})]})]})})}te.interceptors.request.use((async e=>{const t=await l.getItemAsync("user_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),te.interceptors.response.use((e=>e),(async e=>(401===e.response?.status&&(await l.deleteItemAsync("user_token"),await l.deleteItemAsync("user_data"),window.location.href="/auth/login"),Promise.reject(e))));const ae=g.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},keyboardAvoid:{flex:1},title:{textAlign:"center",padding:20},messagesContainer:{flex:1,padding:10},messagesContent:{paddingBottom:20},messageCard:{marginVertical:5,maxWidth:"80%"},userMessage:{alignSelf:"flex-end",backgroundColor:"#e3f2fd"},nevinMessage:{alignSelf:"flex-start",backgroundColor:"#f5f5f5"},inputContainer:{padding:10,borderTopWidth:1,borderTopColor:"#eee"},input:{maxHeight:100},donateButton:{margin:16,backgroundColor:"#4caf50"}});var ne=r(7840),se=r(9273),oe=r(5008),ie=r(6188),le=r(8150),ce=r(294),de=r(8679),ue=r(5936),fe=r(1933);class ge{static async createPaymentLink(){return"https://square.link/u/ZbdMAkZv"}static async processPayment(e){try{const e=await this.createPaymentLink();window.open(e,"_blank")}catch(t){throw console.error("Error processing payment:",t),new Error("Failed to process payment")}}}const he=[5,10,20];function me({visible:e,onDismiss:t,onDonationComplete:r}){const a=async e=>{try{await ge.processPayment(e||0),r()}catch(t){console.error("Error procesando donaci\xf3n:",t),Alert.alert("Error","Hubo un problema procesando tu donaci\xf3n. Por favor intenta nuevamente.")}};return(0,j.jsx)(ue.default,{children:(0,j.jsx)(fe.default,{visible:e,onDismiss:t,contentContainerStyle:ye.container,children:(0,j.jsxs)(m.default,{style:ye.surface,children:[(0,j.jsx)(y.default,{variant:"headlineMedium",style:ye.title,children:"Apoya Nuestro Ministerio"}),(0,j.jsx)(y.default,{style:ye.description,children:"Tu donaci\xf3n nos ayuda a seguir compartiendo la Palabra de Dios"}),he.map((e=>(0,j.jsxs)(p.default,{mode:"contained",onPress:()=>a(e),style:ye.donationButton,children:["Donar $",e]},e))),(0,j.jsx)(p.default,{mode:"contained",onPress:()=>a(),style:ye.donationButton,children:"Otra Cantidad"}),(0,j.jsx)(p.default,{mode:"text",onPress:t,style:ye.cancelButton,children:"Cancelar"})]})})})}const ye=g.default.create({container:{padding:20,margin:20},surface:{padding:20,borderRadius:10,backgroundColor:"white"},title:{textAlign:"center",marginBottom:20},description:{textAlign:"center",marginBottom:20,color:"#666"},donationButton:{marginVertical:8,backgroundColor:"#006aff"},cancelButton:{marginTop:16}});function xe(){const[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1),[n,s]=(0,o.useState)(!0),[i,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)("medium"),[u,g]=(0,o.useState)(!1),{logout:h}=((0,B.useTheme)(),f());(0,o.useEffect)((()=>{m()}),[]);const m=async()=>{try{const e=await O.default.getItem("userSettings");if(e){const r=JSON.parse(e);t(r.darkMode??!1),a(r.offlineMode??!1),s(r.bilingualMode??!0),l(r.autoPlay??!1),d(r.fontSize??"medium")}}catch(e){console.error("Error loading settings:",e)}},x=async(e,t)=>{try{const r=await O.default.getItem("userSettings"),a=r?JSON.parse(r):{},n=Object.assign({},a,{[e]:t});await O.default.setItem("userSettings",JSON.stringify(n))}catch(r){console.error("Error saving settings:",r)}};return(0,j.jsxs)(S.default,{style:pe.container,children:[(0,j.jsx)(se.default,{style:pe.title,children:"Configuraci\xf3n"}),(0,j.jsxs)(oe.default,{children:[(0,j.jsx)(ie.default,{children:"Apariencia"}),(0,j.jsx)(le.default,{title:"Modo Oscuro",left:e=>(0,j.jsx)(ce.default,Object.assign({},e,{icon:"theme-light-dark"})),right:()=>(0,j.jsx)(Y.default,{value:e,onValueChange:e=>{t(e),x("darkMode",e)}})}),(0,j.jsx)(le.default,{title:"Tama\xf1o de Fuente",description:"Ajusta el tama\xf1o del texto",left:e=>(0,j.jsx)(ce.default,Object.assign({},e,{icon:"format-size"})),right:()=>(0,j.jsxs)(w.default,{style:pe.fontSizeControl,children:[(0,j.jsx)(de.default,{icon:"minus",onPress:()=>d("small")}),(0,j.jsx)(y.default,{children:"A"}),(0,j.jsx)(de.default,{icon:"plus",onPress:()=>d("large")})]})})]}),(0,j.jsx)(K.default,{}),(0,j.jsxs)(oe.default,{children:[(0,j.jsx)(ie.default,{children:"Contenido"}),(0,j.jsx)(le.default,{title:"Modo Biling\xfce",description:"Mostrar texto en espa\xf1ol y tzotzil",left:e=>(0,j.jsx)(ce.default,Object.assign({},e,{icon:"translate"})),right:()=>(0,j.jsx)(Y.default,{value:n,onValueChange:e=>{s(e),x("bilingualMode",e)}})}),(0,j.jsx)(le.default,{title:"Modo Sin Conexi\xf3n",description:"Descargar contenido para uso sin internet",left:e=>(0,j.jsx)(ce.default,Object.assign({},e,{icon:"wifi-off"})),right:()=>(0,j.jsx)(Y.default,{value:r,onValueChange:e=>{a(e),x("offlineMode",e)}})}),(0,j.jsx)(le.default,{title:"Auto-reproducci\xf3n",description:"Reproducir audio autom\xe1ticamente",left:e=>(0,j.jsx)(ce.default,Object.assign({},e,{icon:"play-circle"})),right:()=>(0,j.jsx)(Y.default,{value:i,onValueChange:e=>{l(e),x("autoPlay",e)}})})]}),(0,j.jsxs)(w.default,{style:pe.donateContainer,children:[(0,j.jsx)(y.default,{style:pe.donateText,children:"Ay\xfadanos a mantener y mejorar esta aplicaci\xf3n para seguir compartiendo la Palabra de Dios"}),(0,j.jsx)(p.default,{mode:"contained",onPress:()=>g(!0),style:pe.donateButton,icon:"heart",children:"Realizar Donaci\xf3n"})]}),(0,j.jsx)(p.default,{mode:"outlined",onPress:async()=>{ne.default.alert("Cerrar Sesi\xf3n","\xbfEst\xe1s seguro que deseas cerrar sesi\xf3n?",[{text:"Cancelar",style:"cancel"},{text:"Cerrar Sesi\xf3n",onPress:async()=>{await h()},style:"destructive"}])},style:pe.logoutButton,icon:"logout",children:"Cerrar Sesi\xf3n"}),(0,j.jsx)(me,{visible:u,onDismiss:()=>g(!1),onDonationComplete:()=>{g(!1),ne.default.alert("\xa1Gracias!","Tu donaci\xf3n nos ayuda a seguir mejorando.")}})]})}const pe=g.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},title:{fontSize:24,textAlign:"center",marginVertical:20},fontSizeControl:{flexDirection:"row",alignItems:"center"},donateContainer:{padding:16,alignItems:"center",marginTop:20},donateText:{textAlign:"center",marginBottom:16,color:"#666"},donateButton:{width:"80%",marginBottom:10},logoutButton:{margin:16,marginTop:0}}),be=(0,i.default)();function je(){const{isAuthenticated:e}=f();return(0,j.jsx)(be.Navigator,{screenOptions:{headerShown:!1,animation:"slide_from_right"},children:e?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(be.Screen,{name:"Home",component:D}),(0,j.jsx)(be.Screen,{name:"Bible",component:W}),(0,j.jsx)(be.Screen,{name:"Chapter",component:U}),(0,j.jsx)(be.Screen,{name:"Verses",component:Q}),(0,j.jsx)(be.Screen,{name:"Search",component:X}),(0,j.jsx)(be.Screen,{name:"Nevin",component:re}),(0,j.jsx)(be.Screen,{name:"Settings",component:xe})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(be.Screen,{name:"Login",component:v}),(0,j.jsx)(be.Screen,{name:"Register",component:A}),(0,j.jsx)(be.Screen,{name:"ForgotPassword",component:_})]})})}var ve=r(9065),Ce=r(5290),we=r(4354);const Se=new Ce.QueryClient;(0,a.default)((function(){return(0,o.useEffect)((()=>{(async()=>{try{await M.initDatabase()||console.error("Failed to initialize database")}catch(e){console.error("Error initializing app:",e)}})()}),[]),(0,j.jsx)(we.QueryClientProvider,{client:Se,children:(0,j.jsx)(s.default,{children:(0,j.jsxs)(n.default,{children:[(0,j.jsx)(je,{}),(0,j.jsx)(ve.StatusBar,{style:"auto"})]})})})}))},1955:(e,t,r)=>{e.exports=r.p+"static/media/bible.c7bdd421f8c6dfba383c.db"}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,r),s.exports}r.m=e,(()=>{var e=[];r.O=(t,a,n,s)=>{if(!a){var o=1/0;for(d=0;d<e.length;d++){for(var[a,n,s]=e[d],i=!0,l=0;l<a.length;l++)(!1&s||o>=s)&&Object.keys(r.O).every((e=>r.O[e](a[l])))?a.splice(l--,1):(i=!1,s<o&&(o=s));if(i){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[a,n,s]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,s,[o,i,l]=a,c=0;if(o.some((t=>0!==e[t]))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(l)var d=l(r)}for(t&&t(a);c<o.length;c++)s=o[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(d)},a=self.webpackChunkweb=self.webpackChunkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[36],(()=>r(4858)));a=r.O(a)})();
//# sourceMappingURL=main.d6e38290.js.map